
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced Command Line Exercises &#8212; Practical Data Science</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Advanced-Command-Line-Exercises">
<h1>Advanced Command Line Exercises<a class="headerlink" href="#Advanced-Command-Line-Exercises" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Setup">
<h2>Setup<a class="headerlink" href="#Setup" title="Permalink to this headline">¶</a></h2>
<p>When we finished our last set of <a class="reference external" href="Exercise_CommandLine_1_basics.ipynb">Command Line Exercises</a>, we had moved all the CSVs that had data from Thursdays and Fridays into their own folder. In this exercise, we’ll continue to work with that data, and we will assume that the folder currently has the following structure:</p>
<p><code class="docutils literal notranslate"><span class="pre">NYC_311calls_2018</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">311_SR_Data_Dictionary_2018.xlsx</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CE-20170824.pdf</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NYC311_column_names.txt</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">raw</span> <span class="pre">data</span></code> [Folder containing CSVs from all days except Thursdays and Fridays]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thursdays_and_fridays</span></code> [Folder containing all CSVs from Thursdays and Fridays]</p></li>
</ul>
<p>If this is NOT the directory structure that you currently have, then the first exercise is to move around your files and folders until they have this structure!</p>
<div class="section" id="Exercise-1:-Checking-Files">
<h3>Exercise 1: Checking Files<a class="headerlink" href="#Exercise-1:-Checking-Files" title="Permalink to this headline">¶</a></h3>
<p>When doing data work, it is important to always check your assumptions. For example, we <em>think</em> that we have data from every Thursday and Friday in the <code class="docutils literal notranslate"><span class="pre">thursdays_and_fridays</span></code> directory. But are we sure?</p>
<p>To check, let’s quickly google “how many thursdays were there in 2018” and “how many fridays were there in 2018” (there are 52 weeks in a year so it’s probably 52 of each, but important to be sure as 365 is not evenly divided by 52).</p>
<p>Then let’s count the number of files we have in the <code class="docutils literal notranslate"><span class="pre">thursdays_and_fridays</span></code> directory.</p>
<p>Hint: to do this, we need one command to list out the names of all the files in <code class="docutils literal notranslate"><span class="pre">thursdays_and_fridays</span></code> (<code class="docutils literal notranslate"><span class="pre">ls</span></code>), a second command to count the number of files reported (<code class="docutils literal notranslate"><span class="pre">wc</span></code>), and some way to pass data from one to the other.</p>
<p>Second hint: you probably want to use the <code class="docutils literal notranslate"><span class="pre">1</span></code> flag for <code class="docutils literal notranslate"><span class="pre">ls</span></code>. The <code class="docutils literal notranslate"><span class="pre">1</span></code> flag tells <code class="docutils literal notranslate"><span class="pre">ls</span></code> to make sure it only prints one file name per line.</p>
<p>If you have trouble interpreting the output you get, you might have to check the <code class="docutils literal notranslate"><span class="pre">wc</span></code> documentation.</p>
</div>
<div class="section" id="Exercise-2:-Combining-files">
<h3>Exercise 2: Combining files<a class="headerlink" href="#Exercise-2:-Combining-files" title="Permalink to this headline">¶</a></h3>
<p>Having all these individual files is not very efficient. Instead, we’d like to merge all these files into a single large CSV file we can import into Python and analyze.</p>
<p>As you may recall, the <code class="docutils literal notranslate"><span class="pre">cat</span></code> command is often used to print the contents of a file out to the screen. But <code class="docutils literal notranslate"><span class="pre">cat</span></code> actually stands for concatenate: if you give the command multiple files, it will join them together one after the other.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">cat</span></code> to merge all the files in <code class="docutils literal notranslate"><span class="pre">thursdays_and_fridays</span></code> into a single CSV called <code class="docutils literal notranslate"><span class="pre">thursdays_and_fridays.csv</span></code> saved to disk.</p>
</div>
<div class="section" id="Exercise-3:-Viewing-your-Results">
<h3>Exercise 3: Viewing your Results<a class="headerlink" href="#Exercise-3:-Viewing-your-Results" title="Permalink to this headline">¶</a></h3>
<p>Great! Now we have a single CSV file with all our data for Thursdays and Fridays. But there’s a problem: none of the columns are labele!.</p>
<p><strong>Take a look at the first few lines of our merged CSV file using either ``less`` or ``head``.</strong> Head is a new tool! It’s like <code class="docutils literal notranslate"><span class="pre">cat</span></code> in that it just prints the contents of a file to the screen, but unlike <code class="docutils literal notranslate"><span class="pre">cat</span></code> it only prints a few lines. There’s also a command called <code class="docutils literal notranslate"><span class="pre">tail</span></code> that shows you the last few lines of a file.</p>
<p><strong>Try also confirming this by openning ``thursdays_and_fridays.csv`` in Excel.</strong> As you will discover, it’s a very slow process. This is another advantage of the command line: when working with big files, being able to quickly look at a few lines of a file in the command line is very efficient.</p>
</div>
<div class="section" id="Exercise-4:-Editing">
<h3>Exercise 4: Editing<a class="headerlink" href="#Exercise-4:-Editing" title="Permalink to this headline">¶</a></h3>
<p>In <code class="docutils literal notranslate"><span class="pre">NYC311_calls_2018</span></code> is a file called <code class="docutils literal notranslate"><span class="pre">NYC311_column_names.txt</span></code>. It has all the column names for our CSVs.</p>
<p>We can add these column names by concatenating the column name file to the top of our CSV, but only if it is properly formatted, which it is not – when the column names were exported, they included square brackets at the start and end of the column names:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre>
<span></span><span class="nb">cd</span> ~/desktop/NYC_311calls_2018
head NYC311_column_names.txt
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#34;Unique Key&#34;, &#34;Created Date&#34;, &#34;Closed Date&#34;, &#34;Agency&#34;, &#34;Agency Name&#34;, &#34;Complaint Type&#34;, &#34;Descriptor&#34;, &#34;Location Type&#34;, &#34;Incident Zip&#34;, &#34;Incident Address&#34;, &#34;Street Name&#34;, &#34;Cross Street 1&#34;, &#34;Cross Street 2&#34;, &#34;Intersection Street 1&#34;, &#34;Intersection Street 2&#34;, &#34;Address Type&#34;, &#34;City&#34;, &#34;Landmark&#34;, &#34;Facility Type&#34;, &#34;Status&#34;, &#34;Due Date&#34;, &#34;Resolution Action Updated Date&#34;, &#34;Community Board&#34;, &#34;Borough&#34;, &#34;X Coordinate (State Plane)&#34;, &#34;Y Coordinate (State Plane)&#34;, &#34;Park Facility Name&#34;, &#34;Park Borough&#34;, &#34;Vehicle Type&#34;, &#34;Taxi Company Borough&#34;, &#34;Taxi Pick Up Location&#34;, &#34;Bridge Highway Name&#34;, &#34;Bridge Highway Direction&#34;, &#34;Road Ramp&#34;, &#34;Bridge Highway Segment&#34;, &#34;Latitude&#34;, &#34;Longitude&#34;, &#34;Location&#34;]
</pre></div></div>
</div>
<p>Since this is a very small editing task, let’s fix it using <code class="docutils literal notranslate"><span class="pre">nano</span></code>. Use <code class="docutils literal notranslate"><span class="pre">nano</span></code> to open the column name file, remove the square brackets at the beginning and end of the column names, and save the result.</p>
<p>Then concatenate your column names with your CSV to create a new file called <code class="docutils literal notranslate"><span class="pre">thursdays_and_fridays_w_columnnames.csv</span></code>.</p>
</div>
<div class="section" id="Exercise-5:-Cleaning-Up">
<h3>Exercise 5: Cleaning Up<a class="headerlink" href="#Exercise-5:-Cleaning-Up" title="Permalink to this headline">¶</a></h3>
<p>Once you’re done creating this file, let’s clean up by deleting the <code class="docutils literal notranslate"><span class="pre">raw</span> <span class="pre">data</span></code> folder and all its contents.</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Practical DS</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule.html">CLASS SCHEDULE</a></li>
</ul>
<p class="caption"><span class="caption-text">PYTHON &amp; PANDAS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../setup_environment.html">Setting Up Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../managing_python_packages.html">Managing Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_v_r.html">Python / R Differences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vars_v_objects.html">Python: Vars v Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ints_and_floats.html">Numbers in Computers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pandas_series.html">Pandas 1: Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pandas_dataframes.html">Pandas 2: DataFrames</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plotting_part1.html">Plotting, Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plotting_part2.html">Plotting, Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views_and_copies_in_pandas.html">Pandas 3: Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cleaning_editingvalues.html">Cleaning: Editing Values</a></li>
</ul>
<p class="caption"><span class="caption-text">OTHER TOOLS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../command_line_part1.html">Command Line, Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command_line_part2.html">Command Line, Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter.html">Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../git_and_github.html">Git and Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parquet.html">Parquet Format</a></li>
</ul>
<p class="caption"><span class="caption-text">CLOUD</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cloud_what_is_it.html">What Is The Cloud?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud_azureml.html">AzureML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud_dask.html">Set Up Dask on AzureML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud_azurestorage.html">More on Azure Storage</a></li>
</ul>
<p class="caption"><span class="caption-text">SKILLS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_help.html">Getting Help Online</a></li>
<li class="toctree-l1"><a class="reference internal" href="../defensive_programming.html">Defensive Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">Workflow Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../what_is_big_data.html">What is Big Data?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../big_data_strategies.html">Working with Big Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance_understanding.html">Understanding Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance_solutions.html">Solving Performance Probs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallelism.html">Parallel Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../distributed_computing.html">Distributed Computing</a></li>
</ul>
<p class="caption"><span class="caption-text">OTHER</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../not_a_mids_student.html">Not a MIDS Student?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheatsheets.html">Cheat Sheets</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Nick Eubank.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/exercises/Exercise_CommandLine_2_Advanced.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-133829453-1']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>